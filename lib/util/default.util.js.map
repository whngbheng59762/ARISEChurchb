{"version":3,"sources":["../../src/util/default.util.js"],"names":["isGeneratorFunction","expressMiddlewareToKoaMiddleware","fn","constructor","name","ctx","next","resolve","reject","length","req","res","err"],"mappings":";;;;;;;;;;QAQgBA,mB,GAAAA,mB;QAWAC,gC,GAAAA,gC;;AAnBhB;;;;;;AAEA;;;;;;AAMO,SAASD,mBAAT,CAA6BE,EAA7B,EAAiC;AACpC,WAAO,OAAOA,EAAP,KAAc,UAAd,IACHA,GAAGC,WADA,IAEHD,GAAGC,WAAH,CAAeC,IAAf,KAAwB,mBAF5B;AAGH;;AAED;;;;;AAKO,SAASH,gCAAT,CAA0CC,EAA1C,EAA8C;AACjD,WAAO,UAAUG,GAAV,EAAeC,IAAf,EAAqB;AACxB,eAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,gBAAIN,GAAGO,MAAH,GAAY,CAAhB,EAAmB;AACfP,qBAAKG,IAAIK,GAAT,EAAcL,IAAIM,GAAlB,EAAuB,eAAO;AAC1B,wBAAIC,GAAJ,EAAS;AACLJ,+BAAOI,GAAP;AACH,qBAFD,MAEO;AACHL,gCAAQD,MAAR;AACH;AACJ,iBAND;AAOH,aARD,MAQO;AACHJ,mBAAGG,IAAIK,GAAP,EAAYL,IAAIM,GAAhB,EAAqB,eAAO;AACxB,wBAAIC,GAAJ,EAAS;AACLJ,+BAAOI,GAAP;AACH,qBAFD,MAEO;AACHL,gCAAQD,MAAR;AACH;AACJ,iBAND;AAOH;AACJ,SAlBM,CAAP;AAmBH,KApBD;AAqBH","file":"default.util.js","sourcesContent":["import lodash from \"lodash\";\n\n/**\n * Check whether a function is generator.\n *\n * @param  {Function} fn\n * @return {Boolean}\n */\nexport function isGeneratorFunction(fn) {\n    return typeof fn === 'function' &&\n        fn.constructor &&\n        fn.constructor.name === 'GeneratorFunction'\n}\n\n/**\n * Parase express middleware to koa middleware\n * @param fn\n * @returns {Function}\n */\nexport function expressMiddlewareToKoaMiddleware(fn) {\n    return function (ctx, next) {\n        return new Promise((resolve, reject) => {\n            if (fn.length < 3) {\n                fn()(ctx.req, ctx.res, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(next());\n                    }\n                })\n            } else {\n                fn(ctx.req, ctx.res, err => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(next());\n                    }\n                })\n            }\n        })\n    }\n}"]}