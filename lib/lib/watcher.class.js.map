{"version":3,"sources":["../../src/lib/watcher.class.js"],"names":["paths","watcher","watch","appPath","ignored","persistent","on","_path","stats","relative","rootPath","close","require","cache","replace","appName","runtimeName","setTimeout"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;aAII,kBAAwB;AAAA,QAAZA,KAAY,uEAAJ,EAAI;AAAA;;;AAEpB,QAAMC,UAAU,mBAASC,KAAT,CAAeF,MAAMG,OAArB,EAA8B;AAC1CC,iBAAS,UADiC;AAE1CC,oBAAY;AAF8B,KAA9B,CAAhB;;AAKAJ,YAAQK,EAAR,CAAW,QAAX,EAAqB,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;;AAEzC,wBAAW,eAAKC,QAAL,CAAcT,MAAMU,QAApB,EAA8BH,KAA9B,CAAX;;AAEAN,gBAAQU,KAAR;;AAEA,eAAOC,QAAQC,KAAR,CAAcN,MAAMO,OAAN,OAAkBd,MAAMe,OAAxB,cAAwCf,MAAMgB,WAA9C,OAAd,CAAP;;AAEAC,mBAAW,YAAY;AACnB;AACH,SAFD,EAEG,GAFH;AAGH,KAXD;AAYH,C","file":"watcher.class.js","sourcesContent":["import chokidar from \"chokidar\";\nimport path from \"path\";\nimport Koahub from \"./../\";\nimport {watch as watchDebug} from \"./../util/log.util\";\n\nexport default class {\n\n    constructor(paths = {}) {\n\n        const watcher = chokidar.watch(paths.appPath, {\n            ignored: /[\\/\\\\]\\./,\n            persistent: true\n        });\n\n        watcher.on('change', function (_path, stats) {\n\n            watchDebug(path.relative(paths.rootPath, _path));\n\n            watcher.close();\n\n            delete require.cache[_path.replace(`/${paths.appName}/`, `/${paths.runtimeName}/`)];\n\n            setTimeout(function () {\n                new Koahub();\n            }, 200);\n        });\n    }\n}"]}