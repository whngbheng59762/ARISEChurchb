{"version":3,"sources":["../../src/lib/hook.class.js"],"names":["Hook","ctx","next","hooks","name","undefined","key","action","add","push","test","runAction","args","i","length","path"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;IAEqBA,I;AACjB,kBAAYC,GAAZ,EAAiBC,IAAjB,EAAuB;AAAA;;;AAEnB,aAAKD,GAAL,GAAWA,GAAX;AACA,aAAKC,IAAL,GAAYA,IAAZ;;AAEA,aAAKC,KAAL,GAAa,EAAb;AACH;;;;4BAEGC,I,EAAM;;AAEN,gBAAIA,QAAQC,SAAZ,EAAuB;AACnB,uBAAO,KAAKF,KAAZ;AACH,aAFD,MAEO;AACH,qBAAK,IAAIG,GAAT,IAAgB,KAAKH,KAArB,EAA4B;AACxB,wBAAIC,QAAQE,GAAZ,EAAiB;AACb,+BAAO,KAAKH,KAAL,CAAWC,IAAX,CAAP;AACH;AACJ;AACJ;AAEJ;;;4BAEGA,I,EAAMG,M,EAAQ;;AAEd,gBAAIC,MAAM,IAAV;AACA,iBAAK,IAAIF,GAAT,IAAgB,KAAKH,KAArB,EAA4B;AACxB,oBAAIC,QAAQE,GAAZ,EAAiB;AACb,yBAAKH,KAAL,CAAWG,GAAX,EAAgBG,IAAhB,CAAqBF,MAArB;AACAC,0BAAM,KAAN;AACH;AACJ;AACD,gBAAIA,GAAJ,EAAS;AACL,qBAAKL,KAAL,CAAWC,IAAX,IAAmB,CAACG,MAAD,CAAnB;AACH;AACJ;;;;mGAESH,I;;;;;;;;;;;;;;;;yEAEU,KAAKD,K;;;;;;;;AAAZG,mC;;sCACDF,QAAQE,G;;;;;;;;;uEACW,KAAKH,KAAL,CAAWG,GAAX,C;;;;;;;;AAAVC,sC;;qCACD,WAAWG,IAAX,CAAgBH,MAAhB,C;;;;;;uCAGM,KAAKI,SAAL,CAAeJ,MAAf,C;;;;;;;;AAGN;AACIK,oC,GAAO,E;;AACX,qCAASC,CAAT,GAAa,CAAb,EAAgBA,IAAI,MAAUC,MAA9B,EAAsCD,GAAtC,EAA2C;AACvCD,yCAAKH,IAAL,CAAU,MAAUI,CAAV,CAAV;AACH;AACDN,wDAAUK,IAAV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qGAOJG,I;;;;;;uCACN,qBAAU,sBAAc,KAAKd,GAAnB,EAAwB,EAACc,MAAMA,IAAP,EAAxB,CAAV,EAAiD,KAAKb,IAAtD,EAA4D,KAA5D,C;;;;;;;;;;;;;;;;;;;;kBA7DOF,I","file":"hook.class.js","sourcesContent":["import {runAction} from \"./../util/http.util\";\n\nexport default class Hook {\n    constructor(ctx, next) {\n\n        this.ctx = ctx;\n        this.next = next;\n\n        this.hooks = {};\n    }\n\n    get(name) {\n\n        if (name == undefined) {\n            return this.hooks;\n        } else {\n            for (let key in this.hooks) {\n                if (name == key) {\n                    return this.hooks[name];\n                }\n            }\n        }\n\n    }\n\n    add(name, action) {\n\n        let add = true;\n        for (let key in this.hooks) {\n            if (name == key) {\n                this.hooks[key].push(action);\n                add = false;\n            }\n        }\n        if (add) {\n            this.hooks[name] = [action];\n        }\n    }\n\n    async run(name) {\n\n        for (let key in this.hooks) {\n            if (name == key) {\n                for (let action of this.hooks[key]) {\n                    if (/(\\/\\w+)+/.test(action)) {\n\n                        // run action\n                        await this.runAction(action);\n                    } else {\n\n                        // run functions\n                        let args = [];\n                        for (let i = 1; i < arguments.length; i++) {\n                            args.push(arguments[i]);\n                        }\n                        action(...args);\n                    }\n                }\n            }\n        }\n    }\n\n    async runAction(path) {\n        await runAction(Object.assign(this.ctx, {path: path}), this.next, false);\n    }\n}\n"]}